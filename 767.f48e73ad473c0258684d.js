"use strict";(self.webpackChunkcrealogix_test=self.webpackChunkcrealogix_test||[]).push([[767],{6767:(b,u,r)=>{r.r(u),r.d(u,{FilmsModule:()=>q});var m=r(8583),a=r(6901),i=r(639),h=r(6215),p=r(8002);class d{constructor(s){this.director="",this.episodeId=0,this.producer="",this.releaseDate="",this.title="",this.openingCrawl="",s&&(this.director=s.director,this.episodeId=s.episode_id,this.producer=s.producer,this.releaseDate=s.release_date,this.title=s.title,this.openingCrawl=s.opening_crawl)}}var g=r(1841);let f=(()=>{class t{constructor(e){this.http=e,this.film$=new h.X(void 0)}films$(e=""){let l="https://swapi.dev/api/films";return""!==e&&(l=`${l}?search=${e}`),this.http.get(l).pipe((0,p.U)(n=>n.results.map(c=>new d(c))))}getFilm(){return this.film$.asObservable()}setFilm(e){this.film$.next(e)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(g.eN))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Z=r(3763);function v(t,s){1&t&&(i.TgZ(0,"div",3),i._uU(1,"loading films..."),i.qZA())}function F(t,s){if(1&t){const e=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"button",4),i.NdJ("click",function(){return i.CHM(e),i.oxw().initFilms()}),i._UZ(2,"i",5),i._uU(3," Show all records"),i.qZA(),i.qZA()}}function T(t,s){if(1&t){const e=i.EpF();i.TgZ(0,"tr",9),i.NdJ("click",function(){const c=i.CHM(e).$implicit;return i.oxw(2).showFilm(c)}),i.TgZ(1,"td"),i._uU(2),i.qZA(),i.TgZ(3,"td"),i._uU(4),i.qZA(),i.TgZ(5,"td"),i._uU(6),i.qZA(),i.qZA()}if(2&t){const e=s.$implicit;i.xp6(2),i.Oqu(null==e?null:e.title),i.xp6(2),i.Oqu(null==e?null:e.director),i.xp6(2),i.Oqu(null==e?null:e.releaseDate)}}function _(t,s){if(1&t&&(i.ynx(0),i.TgZ(1,"div",6),i.TgZ(2,"table",7),i.TgZ(3,"thead"),i.TgZ(4,"tr"),i.TgZ(5,"th"),i._uU(6,"Title"),i.qZA(),i.TgZ(7,"th"),i._uU(8,"Director"),i.qZA(),i.TgZ(9,"th"),i._uU(10,"Release Date"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(11,"tbody"),i.YNc(12,T,7,3,"tr",8),i.qZA(),i.qZA(),i.qZA(),i.BQk()),2&t){const e=s.ngIf;i.xp6(12),i.Q6J("ngForOf",e)}}const A=[{path:"",component:(()=>{class t{constructor(e,l,n,c){this.router=e,this.filmService=l,this.searchService=n,this.activatedRoute=c,this.hasParams=!1,this.reloadList=!1,this.activatedRoute$=this.activatedRoute.queryParams.subscribe(o=>{o&&o.search?(this.hasParams=!0,this.reloadList=!0,this.onSearchFilms(o.search),this.searchService.setSearchValues$(o.search,"/films")):this.initFilms()}),this.searchValue$=this.searchService.getSearchValue$().subscribe(o=>{o&&"/films"===o.fromUrl&&(this.reloadList=!0,this.onSearchFilms(o.value))})}ngOnInit(){}ngOnDestroy(){this.searchValue$&&this.searchValue$.unsubscribe(),this.activatedRoute$&&this.activatedRoute$.unsubscribe()}initFilms(){this.reloadList=!1,this.films$=this.filmService.films$(),this.hasParams&&this.router.navigate(["/films"]).then(()=>{this.hasParams=!1})}onSearchFilms(e){this.films$=this.filmService.films$(e)}showFilm(e){this.filmService.setFilm(e),this.router.navigate(["/films/view"]).then()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(a.F0),i.Y36(f),i.Y36(Z.o),i.Y36(a.gz))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-film-list"]],decls:5,vars:5,consts:[["loading",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"loading","ms-3"],[1,"btn","btn-outline-primary","mb-3","ms-3",3,"click"],[1,"fa","fa-refresh"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,l){if(1&e&&(i.YNc(0,v,2,0,"ng-template",null,0,i.W1O),i.YNc(2,F,4,0,"div",1),i.YNc(3,_,13,1,"ng-container",2),i.ALo(4,"async")),2&e){const n=i.MAs(1);i.xp6(2),i.Q6J("ngIf",l.reloadList),i.xp6(1),i.Q6J("ngIf",i.lcZ(4,3,l.films$))("ngIfElse",n)}},directives:[m.O5,m.sg],pipes:[m.Ov],styles:[""]}),t})()},{path:"view",component:(()=>{class t{constructor(e,l){this.router=e,this.filmService=l,this.film$=this.filmService.getFilm().subscribe(n=>{n?this.film=n:this.router.navigate(["/films"]).then()})}ngOnInit(){}ngOnDestroy(){this.film$&&this.film$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(a.F0),i.Y36(f))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-film-view"]],decls:30,vars:7,consts:[[1,"card","mx-3"],[1,"card-body"],[1,"fw-bold"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-chevron-left"]],template:function(e,l){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"p"),i.TgZ(3,"span",2),i._uU(4,"Title:"),i.qZA(),i._uU(5),i.qZA(),i.TgZ(6,"p"),i.TgZ(7,"span",2),i._uU(8,"Director:"),i.qZA(),i._uU(9),i.qZA(),i.TgZ(10,"p"),i.TgZ(11,"span",2),i._uU(12,"Producer Class:"),i.qZA(),i._uU(13),i.qZA(),i.TgZ(14,"p"),i.TgZ(15,"span",2),i._uU(16,"Release Date:"),i.qZA(),i._uU(17),i.qZA(),i.TgZ(18,"p"),i.TgZ(19,"span",2),i._uU(20,"Episode ID:"),i.qZA(),i._uU(21),i.qZA(),i.TgZ(22,"p"),i.TgZ(23,"span",2),i._uU(24,"Opening Crawl:"),i.qZA(),i.qZA(),i.TgZ(25,"p"),i._uU(26),i.qZA(),i.TgZ(27,"button",3),i._UZ(28,"i",4),i._uU(29," GO BACK"),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(5),i.hij(" ",null==l.film?null:l.film.title,""),i.xp6(4),i.hij(" ",null==l.film?null:l.film.director,""),i.xp6(4),i.hij(" ",null==l.film?null:l.film.producer,""),i.xp6(4),i.hij(" ",null==l.film?null:l.film.releaseDate,""),i.xp6(4),i.hij(" ",null==l.film?null:l.film.episodeId,""),i.xp6(5),i.Oqu(null==l.film?null:l.film.openingCrawl),i.xp6(1),i.Q6J("routerLink","/films"))},directives:[a.rH],styles:[""]}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[a.Bz.forChild(A)],a.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[m.ez,C]]}),t})()}}]);